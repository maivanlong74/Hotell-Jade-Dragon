Đây là code js của tôi:
    $(function () {
        var chat = $.connection.chat;
        loadClient(chat);
        loadGroup(chat);

        $.connection.hub.start().done(function () {
            // Xóa tin nhắn
            $('#contentMsg').on("click", "button#deleteButton", (function () {
                var matn = $(this).data('id');
                var nguoigui = $(this).data('gui');
                var khachhang = $(this).data('makh');
                chat.server.deleteTinNhan(matn, nguoigui, khachhang);
            }));

            $.connection.sendAsync.client.TinNhanDaXoa = function (id, kh, loai) {
                // Lấy danh sách tin nhắn trong phòng chat và hiển thị lên
                if (loai == true) {
                    chat.server.getMessagesAdmin(id, kh);
                } else {
                    chat.server.getMessages(id);
                }
            };
        });
    });

Đây là code DemoChat.cs của Hubs:
    namespace Jade_Dragon.Hubs
    {
        [HubName("chat")]
        public class DemoChat : Hub
        {
            private Connect db = new Connect();

            public async Task DeleteTinNhan(long id, long gui, long makh)
            {
                tinnhan tn = db.tinnhans.FirstOrDefault(m => m.MaTinNhan == id && m.MaKh == gui);
                tinnhanAdmin tnAdmin = db.tinnhanAdmins.FirstOrDefault(m => m.MaChatAdmin == id && m.IdNguoiGui == gui);
                if (tn != null)
                {
                    long idphong = (long)tn.MaPhongChat;
                    long kh = (long)tn.MaKh;
                    db.tinnhans.Remove(tn);
                    db.SaveChanges();
                    // Gửi thông báo đến các client rằng một tin nhắn đã bị xóa
                    await Clients.All.SendAsync("TinNhanDaXoa", idphong, kh, true);
                }
                else
                {
                    long idphong = (long)tnAdmin.IdNguoiNhan;
                    long kh = (long)tnAdmin.IdNguoiGui;
                    db.tinnhanAdmins.Remove(tnAdmin);
                    db.SaveChanges();
                    // Gửi thông báo đến các client rằng một tin nhắn đã bị xóa
                    await Clients.All.SendAsync("TinNhanDaXoa", idphong, kh, false);
                }
            }
        }
    }

Phần code js này của tôi chưa thể lấy thông tin bên hàm DeleteTinNhan về được:
    $.connection.sendAsync.client.TinNhanDaXoa = function (id, kh, loai) {
        // Lấy danh sách tin nhắn trong phòng chat và hiển thị lên
        if (loai == true) {
            chat.server.getMessagesAdmin(id, kh);
        } else {
            chat.server.getMessages(id);
        }
    };
    Hãy sửa giúp tôi